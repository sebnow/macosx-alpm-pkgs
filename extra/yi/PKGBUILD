# Contributor: Sebastian Nowicki <sebnow@gmail.com
pkgname=yi
pkgver=0.5.2
pkgrel=1
pkgdesc="The Haskell-Scriptable Editor"
arch=('i386' 'x86_64')
url="http://haskell.org/haskellwiki/Yi"
license=('GPL')
depends=('ghc' 'gmp' 'haskell-cabal' 'haskell-diff' 'haskell-binary'
         'haskell-fingertree' 'haskell-ghc-paths'
         'haskell-puremd5>=0.2.3' 'haskell-regex-tdfa>=0.95.2'
         'haskell-rosezipper' 'haskell-unix-compat'
         'haskell-utf8-string>=0.3.1' 'haskell-vty' 'haskell-parsec'
         'haskell-alex')
install=$pkgname.install
source=("http://hackage.haskell.org/packages/archive/$pkgname/$pkgver/$pkgname-$pkgver.tar.gz")
md5sums=('06a88618877d5dea10eab2b6ca1c5f6b')

build() {
  cd "$srcdir/$pkgname-$pkgver"

  runhaskell Setup configure --prefix=/usr/local || return 1
  runhaskell Setup build || return 1
  runhaskell Setup register --gen-script || return 1
  runhaskell Setup unregister --gen-script || return 1
  mkdir -p "$pkgdir/usr/local/share/haskell/$pkgname/"
  install -m744 register.sh "$pkgdir/usr/local/share/haskell/$pkgname/register.sh"
  install -m744 unregister.sh "$pkgdir/usr/local/share/haskell/$pkgname/unregister.sh"
  runhaskell Setup copy --destdir="$pkgdir" || return 1
  mkdir -p "$pkgdir/usr/local/share/licenses/$pkgname/"
  install -m644 LICENSE "$pkgdir/usr/local/share/licenses/$pkgname/LICENSE" || return 1
}

# vim:set ts=2 sw=2 et:
