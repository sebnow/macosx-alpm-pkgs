# Contributor: Sebastian Nowicki <sebnow@gmail.com
# This package is based on the Archlinux PKGBUILD, written by:
# Contributor: Vesa Kaihlavirta <vesa@archlinux.org>
# Contributor: Arch Haskell Team <arch-haskell@haskell.org>
# Package originally generated by cabal2arch 0.4.1
pkgname=haskell-cabal
pkgrel=1
pkgver=1.6.0.2
pkgdesc="A framework for packaging Haskell software"
url="http://www.haskell.org/cabal/"
license=('custom:BSD3')
arch=('i386' 'x86_64')
depends=('ghc=6.10.1' 'bash')
source=("http://hackage.haskell.org/packages/archive/Cabal/$pkgver/Cabal-$pkgver.tar.gz")
install=haskell-cabal.install
md5sums=('0c8da65009494e32fe29dd049ebaa571')
build() {
    cd "$srcdir/Cabal-$pkgver"
    runhaskell Setup configure --prefix=/usr/local || return 1
    runhaskell Setup build || return 1
    runhaskell Setup register --gen-script || return 1
    runhaskell Setup unregister --gen-script || return 1
    mkdir -p "$pkgdir/usr/local/share/haskell/$pkgname/"
    install -m744 register.sh "$pkgdir/usr/local/share/haskell/$pkgname/register.sh"
    install -m744 unregister.sh "$pkgdir/usr/local/share/haskell/$pkgname/unregister.sh"
    runhaskell Setup copy --destdir="$pkgdir" || return 1
    mkdir -p "$pkgdir/usr/local/share/licenses/$pkgname/"
    install -m644 LICENSE "$pkgdir/usr/local/share/licenses/$pkgname/LICENSE" || return 1
}

# vim:set ts=2 sw=2 et:
